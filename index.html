<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculus Indefinite Integrals Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                    }
                }
            },
            darkMode: 'class'
        }
        
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['\\[', '\\]']],
                processEscapes: true
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <style>
        .question-card {
            transition: all 0.3s ease;
        }
        .question-card:hover {
            transform: translateY(-2px);
        }
        .math-content {
            font-size: 1.1em;
        }
        .storage-meter {
            transition: width 0.3s ease;
        }
    </style>
</head>
<body class="bg-white dark:bg-gray-900 transition-colors duration-300">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-2">
                üìö Calculus Indefinite Integrals Quiz
            </h1>
            <p class="text-gray-600 dark:text-gray-300">
                Chapter 5: Indefinite Integrals - Complete all questions and submit your answers
            </p>
            <div class="mt-4 inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200">
                <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                Auto-saving to URL ‚Ä¢ No login required
            </div>
        </div>

        <!-- Storage Info Panel -->
        <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-4 mb-6 border border-blue-200 dark:border-blue-800">
            <div class="flex items-start justify-between">
                <div class="flex-1">
                    <h3 class="text-sm font-semibold text-blue-800 dark:text-blue-200 mb-2 flex items-center">
                        üíæ Data Storage Status
                    </h3>
                    <div id="storageInfo">
                        <div class="text-sm text-gray-600 dark:text-gray-400">
                            Quiz responses are automatically saved in the URL for persistence across sessions.
                        </div>
                    </div>
                </div>
                <button id="clearStorage" 
                        class="ml-4 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 
                               text-sm underline transition-colors flex items-center">
                    üóëÔ∏è Clear All Data
                </button>
            </div>
        </div>

        <!-- Student Information Form -->
        <div id="studentInfo" class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-8 border border-gray-200 dark:border-gray-700">
            <h2 class="text-xl font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                üë§ Student Information
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Class Name *
                    </label>
                    <input type="text" id="className" 
                           class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md 
                                  focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent
                                  bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-base"
                           placeholder="e.g., Calculus I" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Class Number *
                    </label>
                    <input type="text" id="classNumber" 
                           class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md 
                                  focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent
                                  bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-base"
                           placeholder="e.g., MATH 2410-001" required>
                </div>
            </div>
        </div>

        <!-- Quiz Questions -->
        <div id="quizContainer">
            <!-- Question 1 -->
            <div class="question-card bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                    <span class="bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3">1</span>
                    Concept of Indefinite Integral
                </h3>
                <div class="math-content text-gray-700 dark:text-gray-300 mb-4">
                    What does an indefinite integral represent geometrically?
                </div>
                <div class="space-y-3">
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q1" value="A" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(A) Area under a curve between two points</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q1" value="B" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(B) A family of curves with the same derivative</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q1" value="C" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(C) The slope of a tangent line</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q1" value="D" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(D) The instantaneous rate of change</span>
                    </label>
                </div>
            </div>

            <!-- Question 2 -->
            <div class="question-card bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                    <span class="bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3">2</span>
                    Basic Integration
                </h3>
                <div class="math-content text-gray-700 dark:text-gray-300 mb-4">
                    Find \(\int 3x^2 \, dx\).
                </div>
                <div class="space-y-3">
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q2" value="A" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(A) \(x^3 + C\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q2" value="B" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(B) \(6x + C\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q2" value="C" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(C) \(3x^3 + C\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q2" value="D" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(D) \(x^2 + C\)</span>
                    </label>
                </div>
            </div>

            <!-- Question 3 -->
            <div class="question-card bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                    <span class="bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3">3</span>
                    Integration with Exponential
                </h3>
                <div class="math-content text-gray-700 dark:text-gray-300 mb-4">
                    Find \(\int e^x \, dx\).
                </div>
                <div class="space-y-3">
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q3" value="A" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(A) \(e^x \ln x + C\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q3" value="B" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(B) \(e^x + C\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q3" value="C" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(C) \(\ln|x| + C\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q3" value="D" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(D) \(x e^x + C\)</span>
                    </label>
                </div>
            </div>

            <!-- Question 4 -->
            <div class="question-card bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                    <span class="bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3">4</span>
                    Substitution Method
                </h3>
                <div class="math-content text-gray-700 dark:text-gray-300 mb-4">
                    To integrate \(\int 2x \cos(x^2) \, dx\), which substitution is best?
                </div>
                <div class="space-y-3">
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q4" value="A" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(A) \(u = x\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q4" value="B" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(B) \(u = \cos(x^2)\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q4" value="C" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(C) \(u = x^2\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q4" value="D" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(D) \(u = 2x\)</span>
                    </label>
                </div>
            </div>

            <!-- Question 5 -->
            <div class="question-card bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                    <span class="bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3">5</span>
                    Substitution Result
                </h3>
                <div class="math-content text-gray-700 dark:text-gray-300 mb-4">
                    Using \(u = x^3 + 1\), find \(\int 3x^2 (x^3 + 1)^5 \, dx\).
                </div>
                <div class="space-y-3">
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q5" value="A" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(A) \(\frac{1}{6}(x^3 + 1)^6 + C\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q5" value="B" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(B) \((x^3 + 1)^6 + C\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q5" value="C" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(C) \(\frac{1}{2}(x^3 + 1)^6 + C\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q5" value="D" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(D) \(3(x^3 + 1)^6 + C\)</span>
                    </label>
                </div>
            </div>

            <!-- Question 6 -->
            <div class="question-card bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                    <span class="bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3">6</span>
                    Geometrical Application
                </h3>
                <div class="math-content text-gray-700 dark:text-gray-300 mb-4">
                    The slope of a curve at any point \((x, y)\) is \(9x^2 - 4\). If the curve passes through \((0, 1)\), what is its equation?
                </div>
                <div class="space-y-3">
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q6" value="A" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(A) \(y = 3x^3 - 2x + 2\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q6" value="B" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(B) \(y = 3x^3 - 4x + 1\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q6" value="C" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(C) \(y = 18x^3 - 4x - 1\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q6" value="D" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(D) \(y = 6x^3 - 2x\)</span>
                    </label>
                </div>
            </div>

            <!-- Question 7 -->
            <div class="question-card bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                    <span class="bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3">7</span>
                    Physics Application
                </h3>
                <div class="math-content text-gray-700 dark:text-gray-300 mb-4">
                    An object starts from rest with velocity \(v(t) = 8t^2 - t^3\) m/s. Find its displacement \(s(t)\).
                </div>
                <div class="space-y-3">
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q7" value="A" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(A) \(s(t) = \frac{8}{3}t^3 - \frac{1}{4}t^4 + C\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q7" value="B" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(B) \(s(t) = 16t - 3t^2\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q7" value="C" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(C) \(s(t) = 8t^2 - t^3\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q7" value="D" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(D) \(s(t) = \frac{8}{3}t^3 - \frac{1}{4}t^4\)</span>
                    </label>
                </div>
            </div>

            <!-- Question 8 -->
            <div class="question-card bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                    <span class="bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3">8</span>
                    Integral of Trigonometric Function
                </h3>
                <div class="math-content text-gray-700 dark:text-gray-300 mb-4">
                    Find \(\int \sin(3x) \, dx\).
                </div>
                <div class="space-y-3">
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q8" value="A" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(A) \(-\cos(3x) + C\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q8" value="B" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(B) \(-\frac{1}{3}\cos(3x) + C\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q8" value="C" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(C) \(3\cos(3x) + C\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q8" value="D" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(D) \(\frac{1}{3}\sin(3x) + C\)</span>
                    </label>
                </div>
            </div>

            <!-- Question 9 -->
            <div class="question-card bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                    <span class="bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3">9</span>
                    Combined Function Integral
                </h3>
                <div class="math-content text-gray-700 dark:text-gray-300 mb-4">
                    Find \(\int \left(4x + \frac{2}{x}\right) \, dx\).
                </div>
                <div class="space-y-3">
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q9" value="A" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(A) \(2x^2 + 2\ln|x| + C\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q9" value="B" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(B) \(4x^2 + \ln|x| + C\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q9" value="C" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(C) \(2x^2 + \ln|x| + C\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q9" value="D" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(D) \(4x + 2\ln|x| + C\)</span>
                    </label>
                </div>
            </div>

            <!-- Question 10 -->
            <div class="question-card bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6 border border-gray-200 dark:border-gray-700">
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                    <span class="bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3">10</span>
                    Rate of Change Application
                </h3>
                <div class="math-content text-gray-700 dark:text-gray-300 mb-4">
                    The rate of population growth is \(\frac{dP}{dt} = 100e^t\). If \(P(0) = 500\), find \(P(t)\).
                </div>
                <div class="space-y-3">
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q10" value="A" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(A) \(P(t) = 100e^t + 400\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q10" value="B" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(B) \(P(t) = 100e^t + 500\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q10" value="C" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(C) \(P(t) = 500e^t\)</span>
                    </label>
                    <label class="flex items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
                        <input type="radio" name="q10" value="D" class="mr-3 text-primary">
                        <span class="text-gray-700 dark:text-gray-300">(D) \(P(t) = 100e^t\)</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Progress Indicator -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 mb-6 border border-gray-200 dark:border-gray-700">
            <div class="flex items-center justify-between mb-2">
                <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Quiz Progress</span>
                <span id="progressText" class="text-sm text-gray-500 dark:text-gray-400">0/10 answered</span>
            </div>
            <div class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2">
                <div id="progressBar" class="bg-primary h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>
        </div>

        <!-- Submit and Export Section -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-8 border border-gray-200 dark:border-gray-700">
            <div class="flex flex-col sm:flex-row gap-4">
                <button id="submitQuiz" 
                        class="flex-1 bg-primary text-white px-6 py-3 rounded-lg hover:bg-purple-700 
                               transition-colors font-semibold flex items-center justify-center">
                    <span class="mr-2">üìù</span> Submit Quiz
                </button>
                <button id="exportData" 
                        class="flex-1 bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 
                               transition-colors font-semibold flex items-center justify-center">
                    <span class="mr-2">üìä</span> Export to Excel
                </button>
                <button id="viewResults" 
                        class="flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 
                               transition-colors font-semibold flex items-center justify-center">
                    <span class="mr-2">üìà</span> View All Results
                </button>
            </div>
        </div>

        <!-- Results Summary -->
        <div id="resultsSummary" class="hidden bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 border border-gray-200 dark:border-gray-700">
            <h2 class="text-xl font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                <span class="mr-2">üìä</span> Quiz Results Summary
            </h2>
            <div id="summaryContent" class="text-gray-700 dark:text-gray-300">
                <!-- Results will be populated here -->
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-sm w-full mx-4 border border-gray-200 dark:border-gray-700">
            <div class="text-center">
                <div class="text-green-500 text-4xl mb-4">‚úÖ</div>
                <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-2">Quiz Submitted Successfully!</h3>
                <p class="text-gray-600 dark:text-gray-300 mb-4">Your answers have been recorded and saved to the URL.</p>
                <button onclick="closeModal()" 
                        class="bg-primary text-white px-4 py-2 rounded hover:bg-purple-700 transition-colors">
                    Continue
                </button>
            </div>
        </div>
    </div>

    <script>
        // Dark mode setup
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Quiz data storage
        let quizResponses = [];
        const correctAnswers = {
            q1: 'B', q2: 'A', q3: 'B', q4: 'C', q5: 'A',
            q6: 'B', q7: 'D', q8: 'B', q9: 'A', q10: 'A'
        };

        // Progress tracking
        function updateProgress() {
            let answeredCount = 0;
            for (let i = 1; i <= 10; i++) {
                if (document.querySelector(`input[name="q${i}"]:checked`)) {
                    answeredCount++;
                }
            }
            
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            const percentage = (answeredCount / 10) * 100;
            
            progressBar.style.width = percentage + '%';
            progressText.textContent = `${answeredCount}/10 answered`;
        }

        // Add event listeners to all radio buttons for progress tracking
        document.addEventListener('DOMContentLoaded', function() {
            const radioButtons = document.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => {
                radio.addEventListener('change', updateProgress);
            });
        });

        // URL-based storage functions
        function encodeQuizData(responses) {
            try {
                const compressed = responses.map(r => ({
                    t: new Date(r.timestamp).getTime(),
                    cn: r.className,
                    cnm: r.classNumber,
                    a: Object.values(r.answers).join(''),
                    s: r.score
                }));
                return btoa(JSON.stringify(compressed));
            } catch (e) {
                console.error('Error encoding quiz data:', e);
                return '';
            }
        }

        function decodeQuizData(encodedData) {
            try {
                if (!encodedData) return [];
                const compressed = JSON.parse(atob(encodedData));
                return compressed.map(r => ({
                    timestamp: new Date(r.t).toISOString(),
                    className: r.cn,
                    classNumber: r.cnm,
                    answers: {
                        q1: r.a[0], q2: r.a[1], q3: r.a[2], q4: r.a[3], q5: r.a[4],
                        q6: r.a[5], q7: r.a[6], q8: r.a[7], q9: r.a[8], q10: r.a[9]
                    },
                    score: r.s,
                    percentage: Math.round((r.s / 10) * 100)
                }));
            } catch (e) {
                console.error('Error decoding quiz data:', e);
                return [];
            }
        }

        function saveToURL() {
            try {
                const encoded = encodeQuizData(quizResponses);
                const url = new URL(window.location);
                
                if (encoded) {
                    url.searchParams.set('data', encoded);
                } else {
                    url.searchParams.delete('data');
                }
                
                if (url.toString().length > 1900) {
                    showAlert('‚ö†Ô∏è Storage limit reached! Consider exporting data to Excel and clearing old responses.');
                    return false;
                }
                
                window.history.replaceState({}, '', url);
                updateStorageInfo();
                return true;
            } catch (e) {
                console.error('Error saving to URL:', e);
                showAlert('‚ùå Error saving data to URL. The data may be too large.');
                return false;
            }
        }

        function loadFromURL() {
            try {
                const urlParams = new URLSearchParams(window.location.search);
                const encodedData = urlParams.get('data');
                if (encodedData) {
                    quizResponses = decodeQuizData(encodedData);
                    updateStorageInfo();
                }
            } catch (e) {
                console.error('Error loading from URL:', e);
                showAlert('‚ùå Error loading saved data from URL.');
            }
        }

        function updateStorageInfo() {
            const info = document.getElementById('storageInfo');
            if (info) {
                const responseCount = quizResponses.length;
                const urlLength = window.location.href.length;
                const remainingSpace = Math.max(0, 1900 - urlLength);
                
                info.innerHTML = `
                    <div class="text-sm text-gray-600 dark:text-gray-400">
                        <div class="flex justify-between items-center mb-2">
                            <span class="flex items-center">
                                <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
                                Stored Responses: <strong class="ml-1">${responseCount}</strong>
                            </span>
                            <span>URL Storage: ${urlLength}/1900 chars</span>
                        </div>
                        <div class="w-full bg-gray-200 dark:bg-gray-600 rounded-full h-2">
                            <div class="storage-meter bg-primary h-2 rounded-full" 
                                 style="width: ${Math.min(100, (urlLength / 1900) * 100)}%"></div>
                        </div>
                        <div class="mt-1 text-xs">
                            ${remainingSpace < 200 ? 
                                '<span class="text-red-500 font-medium">‚ö†Ô∏è Storage nearly full</span>' : 
                                `~${Math.floor(remainingSpace / 50)} more responses estimated`
                            }
                        </div>
                    </div>
                `;
            }
        }

        function clearStoredData() {
            showConfirmDialog('üóëÔ∏è Clear all stored quiz responses? This action cannot be undone.', () => {
                quizResponses = [];
                const url = new URL(window.location);
                url.searchParams.delete('data');
                window.history.replaceState({}, '', url);
                updateStorageInfo();
                
                document.getElementById('resultsSummary').classList.add('hidden');
                showAlert('‚úÖ All stored responses have been cleared.');
            });
        }

        function submitQuiz() {
            const className = document.getElementById('className').value.trim();
            const classNumber = document.getElementById('classNumber').value.trim();

            if (!className || !classNumber) {
                showAlert('‚ö†Ô∏è Please fill in both class name and class number before submitting.');
                return;
            }

            const answers = {};
            let allAnswered = true;

            for (let i = 1; i <= 10; i++) {
                const selected = document.querySelector(`input[name="q${i}"]:checked`);
                if (selected) {
                    answers[`q${i}`] = selected.value;
                } else {
                    allAnswered = false;
                    break;
                }
            }

            if (!allAnswered) {
                showAlert('‚ö†Ô∏è Please answer all questions before submitting.');
                return;
            }

            let score = 0;
            for (let q in correctAnswers) {
                if (answers[q] === correctAnswers[q]) {
                    score++;
                }
            }

            const response = {
                timestamp: new Date().toISOString(),
                className: className,
                classNumber: classNumber,
                answers: answers,
                score: score,
                percentage: Math.round((score / 10) * 100)
            };

            quizResponses.push(response);
            
            if (saveToURL()) {
                document.getElementById('successModal').classList.remove('hidden');
                
                // Clear form
                document.getElementById('className').value = '';
                document.getElementById('classNumber').value = '';
                document.querySelectorAll('input[type="radio"]').forEach(input => {
                    input.checked = false;
                });
                updateProgress();
            }
        }

        function exportToExcel() {
            if (quizResponses.length === 0) {
                showAlert('üìÑ No quiz responses to export yet.');
                return;
            }

            const headers = [
                'Timestamp', 'Class Name', 'Class Number', 'Q1', 'Q2', 'Q3', 'Q4', 'Q5', 
                'Q6', 'Q7', 'Q8', 'Q9', 'Q10', 'Score', 'Percentage'
            ];

            let csvContent = headers.join(',') + '\n';

            quizResponses.forEach(response => {
                const row = [
                    response.timestamp,
                    `"${response.className}"`,
                    `"${response.classNumber}"`,
                    response.answers.q1, response.answers.q2, response.answers.q3, response.answers.q4, response.answers.q5,
                    response.answers.q6, response.answers.q7, response.answers.q8, response.answers.q9, response.answers.q10,
                    response.score,
                    response.percentage + '%'
                ];
                csvContent += row.join(',') + '\n';
            });

            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `indefinite_integrals_quiz_results_${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        function viewResults() {
            const summaryDiv = document.getElementById('resultsSummary');
            const contentDiv = document.getElementById('summaryContent');

            if (quizResponses.length === 0) {
                contentDiv.innerHTML = '<p class="text-gray-500 text-center">üì≠ No quiz responses yet. Submit some quizzes to see results here.</p>';
            } else {
                const totalResponses = quizResponses.length;
                const averageScore = quizResponses.reduce((sum, r) => sum + r.score, 0) / totalResponses;
                const averagePercentage = Math.round(averageScore / 10 * 100);

                // Calculate question-wise statistics
                const questionStats = {};
                for (let i = 1; i <= 10; i++) {
                    const correct = quizResponses.filter(r => r.answers[`q${i}`] === correctAnswers[`q${i}`]).length;
                    questionStats[`q${i}`] = {
                        correct: correct,
                        percentage: Math.round((correct / totalResponses) * 100)
                    };
                }

                let html = `
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div class="bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700">
                            <h3 class="font-semibold text-blue-800 dark:text-blue-200 flex items-center">
                                üë• Total Responses
                            </h3>
                            <p class="text-2xl font-bold text-blue-600 dark:text-blue-400">${totalResponses}</p>
                        </div>
                        <div class="bg-gradient-to-r from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-4 rounded-lg border border-green-200 dark:border-green-700">
                            <h3 class="font-semibold text-green-800 dark:text-green-200 flex items-center">
                                üéØ Average Score
                            </h3>
                            <p class="text-2xl font-bold text-green-600 dark:text-green-400">${averageScore.toFixed(1)}/10</p>
                        </div>
                        <div class="bg-gradient-to-r from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-4 rounded-lg border border-purple-200 dark:border-purple-700">
                            <h3 class="font-semibold text-purple-800 dark:text-purple-200 flex items-center">
                                üìä Average Percentage
                            </h3>
                            <p class="text-2xl font-bold text-purple-600 dark:text-purple-400">${averagePercentage}%</p>
                        </div>
                    </div>

                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
                            üìà Question Performance Analysis
                        </h3>
                        <div class="grid grid-cols-2 md:grid-cols-5 gap-3">
                `;

                for (let i = 1; i <= 10; i++) {
                    const stat = questionStats[`q${i}`];
                    const color = stat.percentage >= 80 ? 'green' : stat.percentage >= 60 ? 'yellow' : 'red';
                    const bgColor = stat.percentage >= 80 ? 'from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 border-green-200 dark:border-green-700' : 
                                   stat.percentage >= 60 ? 'from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20 border-yellow-200 dark:border-yellow-700' : 
                                   'from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-700';
                    html += `
                        <div class="bg-gradient-to-r ${bgColor} p-3 rounded-lg border text-center">
                            <div class="text-sm font-medium text-${color}-800 dark:text-${color}-200">Question ${i}</div>
                            <div class="text-lg font-bold text-${color}-600 dark:text-${color}-400">${stat.percentage}%</div>
                            <div class="text-xs text-${color}-600 dark:text-${color}-400">${stat.correct}/${totalResponses}</div>
                        </div>
                    `;
                }

                html += `
                        </div>
                    </div>

                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden">
                            <thead>
                                <tr class="bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-600">
                                    <th class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-left font-semibold">Class</th>
                                    <th class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-left font-semibold">Number</th>
                                    <th class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-left font-semibold">Score</th>
                                    <th class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-left font-semibold">Percentage</th>
                                    <th class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-left font-semibold">Timestamp</th>
                                </tr>
                            </thead>
                            <tbody>
                `;

                quizResponses.forEach((response, index) => {
                    const rowColor = response.percentage >= 80 ? 'text-green-600 dark:text-green-400' : 
                                   response.percentage >= 60 ? 'text-yellow-600 dark:text-yellow-400' : 
                                   'text-red-600 dark:text-red-400';
                    
                    html += `
                        <tr class="${index % 2 === 0 ? 'bg-white dark:bg-gray-800' : 'bg-gray-50 dark:bg-gray-700'} hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors">
                            <td class="border border-gray-300 dark:border-gray-600 px-4 py-3">${response.className}</td>
                            <td class="border border-gray-300 dark:border-gray-600 px-4 py-3">${response.classNumber}</td>
                            <td class="border border-gray-300 dark:border-gray-600 px-4 py-3 ${rowColor} font-semibold">${response.score}/10</td>
                            <td class="border border-gray-300 dark:border-gray-600 px-4 py-3 ${rowColor} font-semibold">${response.percentage}%</td>
                            <td class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-sm">${new Date(response.timestamp).toLocaleString()}</td>
                        </tr>
                    `;
                });

                html += '</tbody></table></div>';
                contentDiv.innerHTML = html;
            }

            summaryDiv.classList.remove('hidden');
            summaryDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // Custom dialog functions
        function showAlert(message) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-sm w-full mx-4 border border-gray-200 dark:border-gray-700">
                    <div class="text-center">
                        <div class="text-4xl mb-4">‚ö†Ô∏è</div>
                        <p class="text-gray-700 dark:text-gray-300 mb-4">${message}</p>
                        <button onclick="this.closest('.fixed').remove()" 
                                class="bg-primary text-white px-4 py-2 rounded hover:bg-purple-700 transition-colors">
                            OK
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function showConfirmDialog(message, onConfirm) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-sm w-full mx-4 border border-gray-200 dark:border-gray-700">
                    <div class="text-center">
                        <div class="text-4xl mb-4">ü§î</div>
                        <p class="text-gray-700 dark:text-gray-300 mb-4">${message}</p>
                        <div class="flex justify-center space-x-3">
                            <button onclick="this.closest('.fixed').remove()" 
                                    class="px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors">
                                Cancel
                            </button>
                            <button onclick="this.closest('.fixed').remove(); (${onConfirm})()" 
                                    class="px-4 py-2 bg-red-500 text-white hover:bg-red-600 rounded transition-colors">
                                Confirm
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function closeModal() {
            document.getElementById('successModal').classList.add('hidden');
        }

        // Event listeners
        document.getElementById('submitQuiz').addEventListener('click', submitQuiz);
        document.getElementById('exportData').addEventListener('click', exportToExcel);
        document.getElementById('viewResults').addEventListener('click', viewResults);
        document.getElementById('clearStorage').addEventListener('click', clearStoredData);

        // Load data from URL on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadFromURL();
            updateStorageInfo();
            updateProgress();
            
            if (window.MathJax) {
                MathJax.typesetPromise();
            }
        });
    </script>
</body>
</html>
